\chapter{Result}\label{cha:Research}
This chapter present the results of this thesis. To get a result four tests were run comparing the new implementation of text rendering with distance field with the old implementation. The four tests are described in the previous chapter. The font used for all the tests was Source Sans Pro which is an open source font originally developed by Adobe. All the distance fields generated for the tests visual evaluation 1, visual evaluation 2 and performance evaluation were generated with the constant distance\_tolerance described in the method chapter set to $0.1$.
\section{Visual evaluation 1}
The method described in \ref{viseval1} involves comparing pixel values of rendered glyphs from the old text rendering implementation with the text rendering solution implemented in this thesis. The test was performed on ten different glyphs in two different distance field sizes.

\begin{figure}[H]
\minipage{0.3333333333333\textwidth}
  \includegraphics[width=\linewidth]{test_df_smally}
\endminipage\hfill
\minipage{0.3333333333333\textwidth}
  \includegraphics[width=\linewidth]{test_df_smally64}
\endminipage\hfill
\minipage{0.3333333333333\textwidth}
  \includegraphics[width=\linewidth]{test_df_smally128}
\endminipage\hfill
\caption{One set of input images to the visual evaluation of the rendered glyphs. From the left the pictures are rendered with the old implementation, the new implementation with size 64x64 and the new implementation with size 128x128.}\label{fig:awesome_image2}
\end{figure}

The difference between the images with different distance field is significant. The quality of the glyph rendered from the 128x128 distance field is higher which can easily be recognized comparing the corners of the two distance field glyphs. The following images are the result of the test on one of the glyphs. 

\begin{figure}[H]
\minipage{0.4\textwidth}
  \includegraphics[width=\linewidth]{test_ressmally64}
\endminipage\hfill
\minipage{0.4\textwidth}
  \includegraphics[width=\linewidth]{test_ressmally128}
\endminipage\hfill
\caption{The result of the test Visual evaluation 1. The picture to the left is a comparison between renderering with the old implementation and the new implementation with distance field size 64x64 and the picture to the right is a comparison between rendering with the old implementation and the new implementation with distance field size 128x128.}\label{fig:awesome_image2}
\end{figure}

There is a significant difference of the amount of error between glyphs rendered with 64x64 and 128x128 distance fields. It is well known that glyphs rendered with distance fields get rounded corners which this picture shows aswell, especially in the upper right corner of the right error image. The anti aliasing implementation of the old text rendering and the new is not the same. This might give possible errors around the edges of the glyph in the output image. The rest of the result images can be found in appendix A. 

\section{Visual evaluation 2}
As described in \ref{viseval2} the test Visual evaluation 2 was done in the same way as Visual evaluation 1 but with a different output. The result is a comparison between the equality of pixels between the both input images. The following table gives the result of the tests. 
\begin{table}[H]
\caption{Results of visual evaluation 2}
% title of Table
\centering
% used for centering table
\begin{tabular}{c c c c}
% centered columns (4 columns)
\hline
\hline %inserts double horizontal lines
Glyph & 64x64 & 128x128\\ [0.5ex] % inserts table
%heading
\hline
% inserts single horizontal line
Å & 0.65\% & 1.69\% \\
B & 3.24\% & 1.35\% \\
G & 4.67\% & 0.32\% \\
J & 3.46\% & 0.27\% \\
y & 2.75\% & 0.44\% \\ 
ö & 2.66\% & 0.87\% \\
x & 2.47\% & 2.25\% \\
a & 3.19\% & 0.75\% \\
3 & 2.87\% & 1.96\% \\
7 & 2.09\% & 0.49\% \\ [1ex]
% [1ex] adds vertical space
\hline
%inserts single line
\end{tabular}
\label{table:nonlin}
% is usedto refer this table in the text
\end{table}

The table shows that almost every glyph gets better at the higher distance field size. The average pixel error is 2.81\% for the 64x64 distance field size test and 1.04\% for the 128x128 distance field size test. The only glyph that had less error at the smaller distance field size was the swedish letter Å. The reason for this special case might be different sub pixel alignment of the glyphs rendered by the the two implementations.
\section{Performance evaluation}
As mentioned in \ref{pereval} the method for testing the performance of the distance field text rendering implementation was measuring the time for generating the distance field. The test was run with three different mobile device iphone4, samsung galaxy tab 1 and samsung S6. The glyphs included in the test were a-ö, A-Ö, 0-9 and some other commonly used glyphs. The test was run one time each on the samsung galaxy tab 1 and the samsung s6. The test was run five times on the iphone4 because the time measure on the iphone was not as stable and reliable as the time measure on the samsung devices. In table \ref{table:perfeval} the average generation time for all the tests on the different devices are presented.

\begin{table}[H]
\caption{Results of performance evaluation}
% title of Table
\centering
% used for centering table
\begin{tabular}{c c c c}
% centered columns (4 columns)
\hline
\hline %inserts double horizontal lines
Device & 64x64 & 128x128\\ [0.5ex] % inserts table
%heading
\hline
% inserts single horizontal line
Samsung galaxy tab 1 & 0.0069 s & 0.0159 s \\
Samsung S6 & 0.0020 s & 0.0050 s \\
Iphone4 \#1 & 0.0024 s & 0.0049 s \\
Iphone4 \#2 & 0.0027 s & 0.0045 s \\
Iphone4 \#3 & 0.0026 s & 0.0047 s \\
Iphone4 \#4 & 0.0022 s & 0.0047 s \\
Iphone4 \#5 & 0.0025 s & 0.0057 s \\ [1ex]
% [1ex] adds vertical space
\hline
%inserts single line
\end{tabular}
\label{table:perfeval}
% is usedto refer this table in the text
\end{table}
The Samsung S6 was the device generating the distance fields fastest with an average of 0.002 seconds with 64x64 distance field and 0.0069 seconds with 128x128 distance fields. All the results from the test including generation times for each glyph on every device are presented in appendix B.
\section{Distance tolerance evaluation}
The test distance tolerance evaluation was run on a Samsung S6 rendering the glyph O. The distance field size for this test was contant and set to 128x128. Figure \ref{fig:disttolout} present some of the output images of the test.

\begin{figure}[H]
\minipage{0.25\textwidth}
  \includegraphics[width=\linewidth]{dist_tol1280}
\endminipage\hfill
\minipage{0.25\textwidth}
  \includegraphics[width=\linewidth]{dist_tol10}
\endminipage\hfill
\minipage{0.25\textwidth}
  \includegraphics[width=\linewidth]{dist_tol05}
\endminipage\hfill
\minipage{0.25\textwidth}
  \includegraphics[width=\linewidth]{dist_tol01}
\endminipage\hfill
\caption{Some of the output images from the test distance tolerance evaluation. From the left the value of the distance\_tolerance are $128.0$, $1.0$, $0.5$ and $0.1$.}\label{fig:disttolout}
\end{figure} 

An important result of this test is how the distance field generation time is connected with the value of the distance\_tolerance. Table \ref{table:dist_tol} present the distance field generation times for the test.

\begin{table}[H]
\caption{Results of the distance tolerance evaluation}
% title of Table
\centering
% used for centering table
\begin{tabular}{c c}
% centered columns (4 columns)
\hline
\hline %inserts double horizontal lines
Value & Time\\ [0.5ex] % inserts table
%heading
\hline
% inserts single horizontal line
128.0 	&	0.009545 s  \\
1.0 	&	0.009559 s  \\
0.9 	&	0.009113 s  \\
0.8 	&	0.009112 s  \\
0.7 	&	0.009132 s  \\
0.6 	&	0.009296 s  \\
0.5 	&	0.010477 s  \\
0.4 	&	0.011286 s  \\
0.3 	&	0.010185 s  \\
0.2 	&	0.011947 s  \\
0.1 	&	0.016554 s  \\
0.05 	&	0.017990 s  \\
0.01 	&	0.033086 s  \\ [1ex]
% [1ex] adds vertical space
\hline
%inserts single line
\end{tabular}
\label{table:dist_tol}
% is usedto refer this table in the text
\end{table}

As the table show the distance field generation time is stable around 10 ms for most of the value of distance\_tolerance. For low values of distance tolerance the distance field generation time increases fast.
